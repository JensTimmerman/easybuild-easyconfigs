name = 'pbs_python'
version = '4.3.5'

homepage = ''
description = """The pbs_python package is a wrapper class for the Torque Batch System C library. With this package, you
 now can write utilities and extensions in Python instead of C. This package was developed to replace xpbsmon by an
 ASCII version named pbsmon. PBSQuery is also included in this package. This is a Python module built on top of the pbs
 Python module to simplify querying the batch server. There are a lot of examples included in the source package.
 """

toolchain = {'name': 'ictce', 'version': '5.5.0'}
toolchainopts = {'usempi': True}

source_urls = ['http://ftp.sara.nl/pub/outgoing/', 'https://raw.github.com/adaptivecomputing/torque/4.2-dev/src/include/']

# torque-devel is missing a log.h file we need, so we ship it.
place_for_include_file = "%s-%s/include/torque" % (name, version)
sources = [SOURCE_TAR_GZ, ('log.h', 'mkdir -p %s && cp %%s %s ' % (place_for_include_file, place_for_include_file))]
patches = ['docdir.patch']

python = 'Python'
pythonver = '2.7.6'
pythonshortver = '.'.join(pythonver.split('.')[0:2])
versionsuffix = '-%s-%s' % (python, pythonver)

osdependencies = ['torque-devel']
dependencies = [
    (python, pythonver),
]

premakeopts = 'export CFLAGS="$CFLAGS -I$PWD/include/torque" && '
configopts = "--datarootdir=%(installdir)s --docdir=%(installdir)s"

pythonpath = 'lib/python%s/site-packages/' % pythonshortver
modextrapaths = {"PYTHONPATH": pythonpath}

sanity_check_paths = {
    'files': [],
    'dirs': ["%spbs" % pythonpath]
}

moduleclass = 'tools'
